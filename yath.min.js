function yath(t,e){function n(t){for(var e in f)t(f[e])}function r(t){t.parentNode.removeChild(t)}function a(t){var e=f[t];if(!e)throw new ReferenceError('yath: try to go to screen "'+t+'", which is not found.');!1!==d({game:v,screenName:t,screen:e})&&(n(function(t){t!==e&&t.classList.contains("yathScreen--visible")&&(t.addEventListener("transitionend",function(){r(t)},{capture:!1,once:!0,passive:!0}),t.classList.remove("yathScreen--visible"))}),y[t]++,s.appendChild(e),e.classList.add("yathScreen--visible"))}function o(t){return y[t]}function i(t){return h[t]||0}function c(t){return i(t)>0}var s=t||document.body;s.style.setProperty("display","none");for(var u=e||{},l=u.onClickCallbacks||{},d=u.onScreenChange||function(){},f={},y={},h={},v={inventory:{countItem:i,hasItem:c,addItem:function(t,e){return c(t)||(h[t]=0),h[t]+=e||1,h[t]},removeItem:function(t,e){return c(t)||(h[t]=0),h[t]=Math.max(h[t]-(e||1),0),h[t]},getAllItems:function(){return Object.keys(h).map(function(t){return{itemName:t,total:h[t]}})},reset:function(){h={}}},goToScreen:a,getScreenVisits:o,hasVisitedScreen:function(t){return o(t)>0},resetHistory:function(){Object.keys(y).forEach(function(t){y[t]=0})}},m=s.querySelectorAll("[data-yath-screen]"),p=0,g=m.length;p<g;p++){var b=m[p],k=b.getAttribute("data-yath-screen");b.classList.add("yathScreen"),f[k]=b,y[k]=0,b.removeAttribute("data-yath-screen")}for(var S=Object.keys(l).reduce(function(t,e){return t[e]=l[e],t},{}),A=s.querySelectorAll("[data-yath-onclick]"),L=0,C=A.length;L<C;L++){var I=A[L],P=I.getAttribute("data-yath-onclick");I.classList.add("yathClickable"),I.addEventListener("click",function(t){return function(e){var n=S[t];if(!n)return!0;!1===n(v,e)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}}(P)),I.removeAttribute("data-yath-onclick")}for(var E=s.querySelectorAll("[data-yath-go-to]"),j=0,q=E.length;j<q;j++){var w=E[j],k=w.getAttribute("data-yath-go-to");w.classList.add("yathClickable"),w.addEventListener("click",function(t){return function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),a(t)}}(k)),w.removeAttribute("data-yath-go-to")}return n(r),s.style.removeProperty("display"),v}