function yath(t,e){function n(t){for(var e in f)t(f[e])}function r(t){t.target.parentNode.removeChild(t.target)}function a(t){var e=f[t];if(!e)throw new ReferenceError('yath: try to go to screen "'+t+'", which is not found.');!1!==d({game:v,screenName:t,screen:e})&&(n(function(t){t!==e&&t.classList.contains("yathScreen--visible")&&(t.addEventListener("transitionend",r,{capture:!1,once:!0,passive:!0}),t.classList.remove("yathScreen--visible"))}),h[t]++,s.appendChild(e),e.classList.add("yathScreen--visible"))}function o(t){return h[t]}function i(t){return y[t]||0}function c(t){return i(t)>0}for(var s=t||document.body,u=e||{},l=u.onClickCallbacks||{},d=u.onScreenChange||function(){},f={},h={},y={},v={inventory:{countItem:i,hasItem:c,addItem:function(t,e){return c(t)||(y[t]=0),y[t]+=e||1,y[t]},removeItem:function(t,e){return c(t)||(y[t]=0),y[t]=Math.max(y[t]-(e||1),0),y[t]},getAllItems:function(){return Object.keys(y).map(function(t){return{itemName:t,total:y[t]}})},reset:function(){y={}}},goToScreen:a,getScreenVisits:o,hasVisitedScreen:function(t){return o(t)>0},resetHistory:function(){Object.keys(h).forEach(function(t){h[t]=0})}},g=s.querySelectorAll("[data-yath-screen]"),m=0,b=g.length;m<b;m++){var p=g[m],k=p.getAttribute("data-yath-screen");p.classList.add("yathScreen"),f[k]=p,h[k]=0,p.removeAttribute("data-yath-screen")}for(var S=Object.keys(l).reduce(function(t,e){return t[e]=l[e],t},{}),A=s.querySelectorAll("[data-yath-onclick]"),L=0,C=A.length;L<C;L++){var I=A[L],E=I.getAttribute("data-yath-onclick");I.classList.add("yathClickable"),I.addEventListener("click",function(t){return function(e){var n=S[t];if(!n)return!0;!1===n(v,e)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}}(E)),I.removeAttribute("data-yath-onclick")}for(var P=s.querySelectorAll("[data-yath-go-to]"),j=0,q=P.length;j<q;j++){var w=P[j],k=w.getAttribute("data-yath-go-to");w.classList.add("yathClickable"),w.addEventListener("click",function(t){return function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),a(t)}}(k)),w.removeAttribute("data-yath-go-to")}return n(function(t){r({target:t})}),v}