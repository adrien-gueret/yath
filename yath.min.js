function yath(t,e){function n(t){var e=l[t];if(!e)throw new ReferenceError('yath: try to go to screen "'+t+'", which is not found.');if(!1!==u({game:h,screenName:t,screen:e})){for(var t in l){var n=l[t];n!==e&&n.classList.contains("yathScreen--visible")&&n.classList.remove("yathScreen--visible")}d[t]++,e.classList.add("yathScreen--visible")}}function r(t){return d[t]}function a(t){return f[t]||0}function o(t){return a(t)>0}for(var i=t||document.body,c=e||{},s=c.onClickCallbacks||{},u=c.onScreenChange||function(){},l={},d={},f={},h={inventory:{countItem:a,hasItem:o,addItem:function(t,e){return o(t)||(f[t]=0),f[t]+=e||1,f[t]},removeItem:function(t,e){return o(t)||(f[t]=0),f[t]=Math.max(f[t]-(e||1),0),f[t]},getAllItems:function(){return Object.keys(f).map(function(t){return{itemName:t,total:f[t]}})}},goToScreen:n,getScreenVisits:r,hasVisitedScreen:function(t){return r(t)>0}},y=i.querySelectorAll("[data-yath-screen]"),v=0,m=y.length;v<m;v++){var g=y[v],b=g.getAttribute("data-yath-screen");g.classList.add("yathScreen"),l[b]=g,d[b]=0,g.removeAttribute("data-yath-screen")}for(var k=Object.keys(s).reduce(function(t,e){return t[e]=s[e],t},{}),p=i.querySelectorAll("[data-yath-onclick]"),S=0,A=p.length;S<A;S++){var L=p[S],I=L.getAttribute("data-yath-onclick");L.classList.add("yathClickable"),L.addEventListener("click",function(t){return function(e){var n=k[t];if(!n)return!0;!1===n(h,e)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}}(I)),L.removeAttribute("data-yath-onclick")}for(var C=i.querySelectorAll("[data-yath-go-to]"),P=0,q=C.length;P<q;P++){var w=C[P],b=w.getAttribute("data-yath-go-to");w.classList.add("yathClickable"),w.addEventListener("click",function(t){return function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),n(t)}}(b)),w.removeAttribute("data-yath-go-to")}return h}