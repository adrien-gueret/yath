function yath(t,e){function n(t){var e=l[t];if(!e)throw new ReferenceError('yath: try to go to screen "'+t+'", which is not found.');if(!1!==u({game:h,screenName:t,screen:e})){for(var n in l){var r=l[n];r!==e&&r.classList.contains("yathScreen--visible")&&r.classList.remove("yathScreen--visible")}f[t]++,e.classList.add("yathScreen--visible")}}function r(t){return f[t]}function a(t){return d[t]||0}function o(t){return a(t)>0}for(var i=t||document.body,c=e||{},s=c.onClickCallbacks||{},u=c.onScreenChange||function(){},l={},f={},d={},h={inventory:{countItem:a,hasItem:o,addItem:function(t,e){return o(t)||(d[t]=0),d[t]+=e||1,d[t]},removeItem:function(t,e){return o(t)||(d[t]=0),d[t]=Math.max(d[t]-(e||1),0),d[t]},getAllItems:function(){return Object.keys(d).map(function(t){return{itemName:t,total:d[t]}})},reset:function(){d={}}},goToScreen:n,getScreenVisits:r,hasVisitedScreen:function(t){return r(t)>0},resetHistory:function(){Object.keys(f).forEach(function(t){f[t]=0})}},y=i.querySelectorAll("[data-yath-screen]"),v=0,m=y.length;v<m;v++){var g=y[v],b=g.getAttribute("data-yath-screen");g.classList.add("yathScreen"),l[b]=g,f[b]=0,g.removeAttribute("data-yath-screen")}for(var k=Object.keys(s).reduce(function(t,e){return t[e]=s[e],t},{}),p=i.querySelectorAll("[data-yath-onclick]"),S=0,A=p.length;S<A;S++){var L=p[S],I=L.getAttribute("data-yath-onclick");L.classList.add("yathClickable"),L.addEventListener("click",function(t){return function(e){var n=k[t];if(!n)return!0;!1===n(h,e)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}}(I)),L.removeAttribute("data-yath-onclick")}for(var C=i.querySelectorAll("[data-yath-go-to]"),E=0,P=C.length;E<P;E++){var j=C[E],b=j.getAttribute("data-yath-go-to");j.classList.add("yathClickable"),j.addEventListener("click",function(t){return function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),n(t)}}(b)),j.removeAttribute("data-yath-go-to")}return h}