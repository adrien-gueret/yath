function yath(t,e){function n(t){var e=u[t];if(!e)throw new ReferenceError('yath: try to go to screen "'+t+'", which is not found.');if(!1!==s({game:f,screenName:t,screen:e})){for(var t in u){var n=u[t];n!==e&&n.classList.contains("yathScreen--visible")&&n.classList.remove("yathScreen--visible")}l[t]++,e.classList.add("yathScreen--visible")}}function r(t){return l[t]}function a(t){return d[t]||0}function o(t){return a(t)>0}for(var i=t||document.body,c=e.onClickCallbacks||{},s=e.onScreenChange||function(){},u={},l={},d={},f={inventory:{countItem:a,hasItem:o,addItem:function(t,e){return o(t)||(d[t]=0),d[t]+=e||1,d[t]},removeItem:function(t,e){return o(t)||(d[t]=0),d[t]=Math.max(d[t]-(e||1),0),d[t]},getAllItems:function(){return Object.keys(d).map(function(t){return{itemName:t,total:d[t]}})}},goToScreen:n,getScreenVisits:r,hasVisitedScreen:function(t){return r(t)>0}},h=i.querySelectorAll("[data-yath-screen]"),y=0,v=h.length;y<v;y++){var m=h[y],g=m.getAttribute("data-yath-screen");m.classList.add("yathScreen"),u[g]=m,l[g]=0,m.removeAttribute("data-yath-screen")}for(var b=Object.keys(c).reduce(function(t,e){return t[e]=c[e],t},{}),k=i.querySelectorAll("[data-yath-onclick]"),p=0,S=k.length;p<S;p++){var A=k[p],L=A.getAttribute("data-yath-onclick");A.classList.add("yathClickable"),A.addEventListener("click",function(t){return function(e){var n=b[t];if(!n)return!0;!1===n(f,e)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}}(L)),A.removeAttribute("data-yath-onclick")}for(var I=i.querySelectorAll("[data-yath-go-to]"),C=0,P=I.length;C<P;C++){var q=I[C],g=q.getAttribute("data-yath-go-to");q.classList.add("yathClickable"),q.addEventListener("click",function(t){return function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),n(t)}}(g)),q.removeAttribute("data-yath-go-to")}return f}