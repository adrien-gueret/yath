!function(t,e,a){function r(t,a){var r=this;this.gameContainer=t||e.body,this.screens={},this.callbacks=Object.keys(a||{}).reduce(function(t,e){return t[e]=a[e].bind(r),t},{}),this.data={};for(var n=this.gameContainer.querySelectorAll("[data-yath-screen]"),i=0,o=n.length;i<o;i++){var s=n[i],c=s.getAttribute("data-yath-screen");s.classList.add("yathScreen"),this.screens[c]=s,s.removeAttribute("data-yath-screen")}this.attachEvents(this.gameContainer)}r.prototype.attachEvents=function(t){for(var e=t.querySelectorAll("[data-yath-onclick]"),a=0,r=e.length;a<r;a++){var n=e[a],i=n.getAttribute("data-yath-onclick");n.classList.add("yathClickable"),n.addEventListener("click",this.getClickHandler(i)),n.removeAttribute("data-yath-onclick")}for(var o=t.querySelectorAll("[data-yath-go-to]"),s=0,c=o.length;s<c;s++){var l=o[s],h=l.getAttribute("data-yath-go-to");l.classList.add("yathClickable"),l.addEventListener("click",this.getGoHandler(h)),l.removeAttribute("data-yath-go-to")}},r.prototype.getClickHandler=function(t){var e=this;return function(a){var r=e.callbacks[t];if(!r)return!0;!1===r(a.target)&&(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation())}},r.prototype.getGoHandler=function(t){var e=this;return function(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),e.goToScreen(t)}},r.prototype.goToScreen=function(t){var e=this.screens[t];if(!e)throw new ReferenceError('yath: try to go to screen "'+t+'", which is not found.');for(var t in this.screens){var a=this.screens[t];a!==e&&a.classList.contains("yathScreen--visible")&&a.classList.remove("yathScreen--visible")}e.classList.add("yathScreen--visible")};var n={Game:r};t.yath=n}(window,document);