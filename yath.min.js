!function(t,e,a){function r(t,a,r){var n=this;this.gameContainer=r||e.body,this.language="en",this.screens={},this.texts=t,this.callbacks=Object.keys(a||{}).reduce(function(t,e){return t[e]=a[e].bind(n),t},{}),this.data={};for(var i=this.gameContainer.querySelectorAll("[data-yath-screen]"),s=0,o=i.length;s<o;s++){var c=i[s],l=c.getAttribute("data-yath-screen");c.classList.add("yathScreen"),c.classList.add(l),this.screens[l]=c,c.removeAttribute("data-yath-screen")}this.attachEvents(this.gameContainer)}r.prototype.attachEvents=function(t){for(var e=t.querySelectorAll("[data-yath-onclick]"),a=0,r=e.length;a<r;a++){var n=e[a],i=n.getAttribute("data-yath-onclick");n.classList.add("yathClickable"),n.addEventListener("click",this.getClickHandler(i)),n.removeAttribute("data-yath-onclick")}for(var s=t.querySelectorAll("[data-yath-go-to]"),o=0,c=s.length;o<c;o++){var l=s[o],h=l.getAttribute("data-yath-go-to");l.classList.add("yathClickable"),l.addEventListener("click",this.getGoHandler(h)),l.removeAttribute("data-yath-go-to")}},r.prototype.getClickHandler=function(t){var e=this;return function(a){var r=e.callbacks[t];if(!r)return!0;!1===r()&&(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation())}},r.prototype.getGoHandler=function(t){var e=this;return function(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),e.goToScreen(t)}},r.prototype.goToScreen=function(t){var e=this.screens[t];if(!e)throw new ReferenceError('yath: try to go to screen "'+t+'", which is not found.');for(var t in this.screens){var a=this.screens[t];a!==e&&a.classList.contains("yathScreen--visible")&&a.classList.remove("yathScreen--visible")}this.translateScreen(e),e.classList.add("yathScreen--visible")},r.prototype.translateScreen=function(t){for(var e=t.querySelectorAll("[data-yath-i18n]"),a=0,r=e.length;a<r;a++)this.translateElement(e[a])},r.prototype.translateElement=function(t){var e=t.getAttribute("data-yath-i18n");if(!e)return!1;for(var a=e.split("."),r=this.texts,n=0,i=a.length;n<i;n++)r=r[a[n]]||{};var s=r[this.language]||null;return null!==s&&(t.innerHTML=s,this.attachEvents(t),!0)};var n={Game:r};t.yath=n}(window,document);